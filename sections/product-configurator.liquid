<link
  rel="stylesheet"
  href="{{ 'screenlux.css' | asset_url }}&v={{ 'now' | date: '%N' }}"
  media="print"
  onload="this.media='all'"
>
<link rel="stylesheet" href="{{ 'component-slider.css' | asset_url }}" media="print" onload="this.media='all'">
<noscript>{{ 'screenlux.css' | asset_url | stylesheet_tag }}</noscript>
<style>
  body,
  .gradient {
    background-color: #f5f5f5 !important;
  }
  .screenlux-product-container {
    background-color: transparent;
  }
  /* Configurator Group Box Styles */
  .configurator-group-box {
    background-color: #ffffff;
    border: 1px solid #e5e5e5;
    border-radius: 24px;
    padding: 24px;
    margin-bottom: 24px;
  }
  @media screen and (max-width: 749px) {
    .configurator-group-box {
      padding: 16px;
    }
  }
  .de-badge-container {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
    margin-bottom: 8px;
  }
  .de-badge-icon {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    object-fit: cover;
  }
  .de-badge-text {
    font-size: 16px;
    color: #171717;
  }
</style>
{% render 'screenlux-data' %}

<script src="{{ 'global.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'screenlux-engine.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'media-gallery.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'product-description.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'hybrid-quantity-selector.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'product-configurator-v2.js' | asset_url }}&v=DesignV2_{{ 'now' | date: '%N' }}" defer="defer"></script>

<div class="page-width screenlux-product-container">
  <!-- Left Column: Sticky Media Gallery -->
  <div class="sticky-media-col product__media-wrapper screenlux-gallery">
    {% render 'product-media-gallery', product: product %}
  </div>

  <!-- Right Column: Configurator Form -->
  <div class="product__info-wrapper">
    <div class="product-title-section">
      <h1 class="product-title">{{ product.title }}</h1>
    </div>

    <div class="de-badge-container">
      <img
        src="{{ 'de-badge.png' | asset_url }}"
        alt="Developed in Germany"
        class="de-badge-icon"
        width="22"
        height="22"
        loading="lazy"
      >
      <span class="de-badge-text">Developed in Germany</span>
    </div>

    <product-description class="product__description" data-limit="180">
      <div class="description-content">
        {{ product.description }}
      </div>
      <button type="button" class="description-toggle-btn">Read more</button>
    </product-description>

    <!-- The Custom Application Root -->
    <script>
      console.log('Screenlux Data Loaded:', window.ScreenluxData);
      if (!window.ScreenluxData) console.error('ScreenluxData is missing!');
      if (window.ScreenluxData && window.ScreenluxData.screens.length === 0)
        console.warn('ScreenluxData.screens is empty! Check collection "main-product".');
    </script>
    <product-configurator>
      <div
        id="loading-fallback"
        style="padding: 20px; text-align: center; border: 1px dashed #ccc; background: #fafafa;"
      >
        <h3>Configuration Loading...</h3>
        <p>If this does not disappear, no products were found in the "main-product" collection.</p>
        <p><small>(Check Console for details)</small></p>
      </div>
      <!--
        The content here is rendered by JS.
        We pass the cart-add-url for the engine to use.
      -->
      <input type="hidden" name="cart-add-url" value="{{ routes.cart_add_url }}">
    </product-configurator>
  </div>
</div>

{% schema %}
{
  "name": "Product Configurator",
  "tag": "section",
  "class": "section",
  "settings": []
}
{% endschema %}
