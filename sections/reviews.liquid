{% comment %} Figma Source: https://www.figma.com/design/aN5Y2pkIVBDAWQLbNWnr9U/Screenlux-Website?node-id=253-1246 {% endcomment %}

{%- style -%}
  #shopify-section-{{ section.id }} {
    background-color: {{ section.settings.bg_color }};
  }

  .reviews {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 64px;
    padding: 80px 64px;
    max-width: 1440px;
    margin: 0 auto;
    overflow: hidden;
  }

  /* --- Title --- */
  .reviews__title {
    font-family: 'Inter', sans-serif;
    font-weight: 600;
    font-size: 48px;
    line-height: 1;
    color: {{ section.settings.heading_color }};
    margin: 0;
    text-align: center;
    width: 100%;
  }

  /* --- Cards Container --- */
  .reviews__container {
    display: flex;
    gap: 32px;
    align-items: stretch;
    overflow-x: auto;
    scroll-behavior: smooth;
    -ms-overflow-style: none;
    scrollbar-width: none;
    width: 100%;
  }

  .reviews__container::-webkit-scrollbar {
    display: none;
  }

  /* --- Review Card --- */
  .reviews__card {
    background: {{ section.settings.card_bg_color }};
    border: 1px solid {{ section.settings.card_border_color }};
    border-radius: 24px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 32px 24px;
    min-width: 340px;
    max-width: 340px;
    overflow: hidden;
    flex-shrink: 0;
  }

  /* --- Card Header (avatar + name) --- */
  .reviews__card-header {
    display: flex;
    gap: 12px;
    align-items: flex-start;
    width: 100%;
  }

  .reviews__avatar {
    width: 50px;
    height: 50px;
    min-width: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    padding: 19px;
  }

  .reviews__avatar-text {
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    font-size: 20px;
    line-height: 1;
    color: #000;
  }

  .reviews__author-info {
    display: flex;
    flex-direction: column;
    gap: 8px;
    justify-content: center;
    color: {{ section.settings.text_color }};
  }

  .reviews__author-name {
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    font-size: 16px;
    line-height: 1;
    margin: 0;
  }

  .reviews__author-date {
    font-family: 'Inter', sans-serif;
    font-weight: 400;
    font-size: 14px;
    line-height: 1;
    margin: 0;
  }

  /* --- Star Rating --- */
  .reviews__stars {
    display: flex;
    gap: 3px;
    align-items: flex-start;
  }

  .reviews__star {
    width: 19px;
    height: 19px;
    flex-shrink: 0;
  }

  .reviews__star svg {
    width: 100%;
    height: 100%;
    display: block;
  }

  /* --- Review Text --- */
  .reviews__card-title {
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    font-style: italic;
    font-size: 20px;
    line-height: 1;
    color: {{ section.settings.text_color }};
    margin: 0;
  }

  .reviews__card-body {
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    font-size: 16px;
    line-height: 22px;
    color: {{ section.settings.body_text_color }};
    margin: 0;
  }

  /* --- Navigation --- */
  .reviews__nav {
    display: flex;
    gap: 12px;
    align-items: center;
    justify-content: flex-end;
    width: 100%;
  }

  .reviews__nav-btn {
    width: 56px;
    height: 56px;
    border-radius: 9999px;
    border: 1px solid {{ section.settings.card_border_color }};
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(6px);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    padding: 12px;
    transition: opacity 0.2s ease;
  }

  .reviews__nav-btn:hover {
    opacity: 0.7;
  }

  .reviews__nav-btn--prev {
    opacity: 0.4;
  }

  .reviews__nav-btn svg {
    width: 32px;
    height: 32px;
    display: block;
  }

  /* --- Mobile --- */
  @media screen and (max-width: 749px) {
    .reviews {
      padding: 60px 20px;
      gap: 40px;
    }

    .reviews__title {
      font-size: 32px;
    }

    .reviews__container {
      gap: 16px;
    }

    .reviews__card {
      min-width: 280px;
      max-width: 280px;
    }

    .reviews__nav {
      justify-content: flex-start;
    }
  }
{%- endstyle -%}

<section class="reviews" data-section-id="{{ section.id }}">
  <h2 class="reviews__title">{{ section.settings.heading }}</h2>

  <div class="reviews__container" id="reviews-slider-{{ section.id }}">
    {%- for block in section.blocks -%}
      {%- if block.type == 'review_card' -%}
        <article class="reviews__card" {{ block.shopify_attributes }}>
          {%- comment -%} Card header: Avatar + Author info {%- endcomment -%}
          <div class="reviews__card-header">
            <div class="reviews__avatar" style="background-color: {{ block.settings.avatar_color }};">
              <span class="reviews__avatar-text">{{ block.settings.initials }}</span>
            </div>
            <div class="reviews__author-info">
              <p class="reviews__author-name">{{ block.settings.author_name }}</p>
              <p class="reviews__author-date">{{ block.settings.date }}</p>
            </div>
          </div>

          {%- comment -%} Star rating {%- endcomment -%}
          <div class="reviews__stars">
            {%- assign stars = block.settings.stars | default: 5 -%}
            {%- for i in (1..stars) -%}
              <span class="reviews__star">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect width="19.2329" height="19.2329" fill="#00B67A"/>
                  <path d="M9.6165 2.21875L11.5644 6.93495L16.6517 7.33013L12.7683 10.6401L13.9645 15.6005L9.6165 12.93L5.2685 15.6005L6.46472 10.6401L2.58129 7.33013L7.66859 6.93495L9.6165 2.21875Z" fill="white"/>
                </svg>
              </span>
            {%- endfor -%}
          </div>

          {%- comment -%} Review title & body {%- endcomment -%}
          {%- if block.settings.review_title != blank -%}
            <p class="reviews__card-title">"{{ block.settings.review_title }}"</p>
          {%- endif -%}

          {%- if block.settings.review_body != blank -%}
            <p class="reviews__card-body">{{ block.settings.review_body }}</p>
          {%- endif -%}
        </article>
      {%- endif -%}
    {%- endfor -%}
  </div>

  {%- comment -%} Navigation arrows {%- endcomment -%}
  <div class="reviews__nav">
    <button
      class="reviews__nav-btn reviews__nav-btn--prev"
      aria-label="Previous reviews"
      onclick="document.getElementById('reviews-slider-{{ section.id }}').scrollBy({left: -372, behavior: 'smooth'})"
    >
      <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M20 8L12 16L20 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <button
      class="reviews__nav-btn reviews__nav-btn--next"
      aria-label="Next reviews"
      onclick="document.getElementById('reviews-slider-{{ section.id }}').scrollBy({left: 372, behavior: 'smooth'})"
    >
      <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 8L20 16L12 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>
</section>

{% schema %}
{
  "name": "Reviews",
  "tag": "section",
  "class": "reviews-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "What people are saying"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#171717"
    },
    {
      "type": "color",
      "id": "body_text_color",
      "label": "Body text color",
      "default": "#525252"
    },
    {
      "type": "color",
      "id": "card_bg_color",
      "label": "Card background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "card_border_color",
      "label": "Card border color",
      "default": "#e5e5e5"
    }
  ],
  "blocks": [
    {
      "type": "review_card",
      "name": "Review Card",
      "settings": [
        {
          "type": "text",
          "id": "initials",
          "label": "Author initials",
          "default": "LW"
        },
        {
          "type": "text",
          "id": "author_name",
          "label": "Author name",
          "default": "Lukas Weber"
        },
        {
          "type": "text",
          "id": "date",
          "label": "Date",
          "default": "11 Feb. 2026"
        },
        {
          "type": "color",
          "id": "avatar_color",
          "label": "Avatar color",
          "default": "#ddf9e3"
        },
        {
          "type": "range",
          "id": "stars",
          "label": "Star rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        },
        {
          "type": "text",
          "id": "review_title",
          "label": "Review title",
          "default": "Hält auch im grauen Winter."
        },
        {
          "type": "textarea",
          "id": "review_body",
          "label": "Review body",
          "default": "Ich war skeptisch wegen der Solarfunktion im Norden, aber die 30 Tage Laufzeit ohne Sonne sind kein Marketing-Gag. Selbst im tiefsten Grau laufen die Screens einwandfrei. Es hält auch im grauen Winter absolut, was es verspricht."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Reviews",
      "blocks": [
        {
          "type": "review_card",
          "settings": {
            "initials": "LW",
            "author_name": "Lukas Weber",
            "date": "11 Feb. 2026",
            "avatar_color": "#ddf9e3",
            "stars": 5,
            "review_title": "Hält auch im grauen Winter.",
            "review_body": "Ich war skeptisch wegen der Solarfunktion im Norden, aber die 30 Tage Laufzeit ohne Sonne sind kein Marketing-Gag. Selbst im tiefsten Grau laufen die Screens einwandfrei. Es hält auch im grauen Winter absolut, was es verspricht."
          }
        },
        {
          "type": "review_card",
          "settings": {
            "initials": "AS",
            "author_name": "Anja Schneider",
            "date": "19 Feb. 2026",
            "avatar_color": "#ddf4f9",
            "stars": 5,
            "review_title": "Ästhetik pur.",
            "review_body": "Die 85mm Kassette ist wahnsinnig schlank. Dass Technik, die einen Monat ohne Licht auskommt, in so ein flaches Design passt, hat mich echt beeindruckt. Für mich ist das Ästhetik pur kombiniert mit High-Tech."
          }
        },
        {
          "type": "review_card",
          "settings": {
            "initials": "MK",
            "author_name": "Matthias Koch",
            "date": "21 Feb. 2026",
            "avatar_color": "#ddf4f9",
            "stars": 5,
            "review_title": "Einfache Montage, starke Leistung.",
            "review_body": "Selbst montiert und direkt begeistert. Das ist einfache Montage und starke Leistung in einem: Die Akku-Leistung für einen ganzen Monat Dunkelheit gibt einem ein extrem sicheres Gefühl. Top System!"
          }
        },
        {
          "type": "review_card",
          "settings": {
            "initials": "CS",
            "author_name": "Christian Schmidt",
            "date": "26 Feb. 2026",
            "avatar_color": "#f9dde1",
            "stars": 5,
            "review_title": "Profis am Werk.",
            "review_body": "Montageservice genutzt und alles perfekt. Da waren echte Profis am Werk. Die Screens laufen seit Wochen ohne einen einzigen Sonnenstrahl – genau wie versprochen."
          }
        },
        {
          "type": "review_card",
          "settings": {
            "initials": "EF",
            "author_name": "Elena Fischer",
            "date": "27 Feb. 2026",
            "avatar_color": "#ddf9e3",
            "stars": 5,
            "review_title": "Zuverlässig und robust.",
            "review_body": "Zuverlässig und robust: Nach diesem Winter im Schwarzwald kann ich das bestätigen. Der 5200 mAh Akku ist ein echtes Kraftpaket."
          }
        }
      ]
    }
  ]
}
{% endschema %}
